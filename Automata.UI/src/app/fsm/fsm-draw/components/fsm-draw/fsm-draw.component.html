<div class='scroll-container' [style.height]='height' oncontextmenu='return false'>
  <div class='draw-container bg-drawing'>
    <app-fsm-draw-surface 
      (surfaceclick)='onSurfaceClick($event)'
      (surfacedblclick)='onSurfaceDblClick($event)'
      (surfacemousedown)='onSurfaceMouseDown($event)'
      (surfacemousemove)='onSurfaceMouseMove($event)'
      (surfacecontextmenu)='onSurfaceContextMenu($event)'
    > 
        <ng-template ngFor let-item [ngForOf]='fsmSvc.fsmStates'>
            <svg:g app-fsm-draw-state [state]='item' [selected]='selected && selected.state===item'  />
          </ng-template>
        </app-fsm-draw-surface>
    
  </div>
</div>
<app-fsm-draw-controlbar [readonly]='readonly' (clear)='onCtrlbarClear()' (help)='onCtrlbarHelp()' (mode)='onCtrlbarMode($event)' (validate)='onCtrlbarValidate()' (zoom)='onCtrlbarZoom($event)'>
</app-fsm-draw-controlbar>

<!--State context menu
<div class="context-menu dropdown-menu" [ngStyle]="stateContextStyle">
  <a href='' class='dropdown-item' (click)='onStateContextDelete($event)'>Delete</a>
  <div class='dropdown-divider'>&nbsp;</div>
  <a href='' class='dropdown-item' (click)='onStateContextToggleStart($event)'>
    <span class='fas' [ngClass]='{"fa-check":_stateContextItem!=null && _stateContextItem.stateType==="start" || _stateContextItem.stateType==="startfinal" }'></span> Start State</a>
  <a href='' (click)='onStateContextToggleFinal($event)' class='dropdown-item '>
    <span class='fas' [ngClass]='{"fa-check":_stateContextItem!=null && _stateContextItem.stateType==="final" || _stateContextItem.stateType==="startfinal" }'></span>
    Final State</a>
</div>
-->